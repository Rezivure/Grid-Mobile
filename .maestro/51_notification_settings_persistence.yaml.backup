appId: app.mygrid.grid
---
# Test: Verify notification settings toggle persistence
# Prerequisite: testuser1 logged in on map screen

- launchApp
- waitForAnimationToEnd
- extendedWaitUntil:
    visible: "My Contacts"
    timeout: 10000

# Navigate to settings
- tapOn:
    point: "16,100"
- waitForAnimationToEnd
- assertVisible: "Settings"

# Scroll to find notifications section
- swipe:
    start: "50%,70%"
    end: "50%,40%"
- waitForAnimationToEnd

# Look for notifications settings
- assertVisible: 
    text: "Notifications"
    optional: true

# Tap on notifications if visible
- tapOn:
    text: "Notifications"
    optional: true
- waitForAnimationToEnd

# Look for notification toggle switches
- assertVisible:
    text: "Enable Notifications"
    optional: true

# Toggle a notification setting if present
- tapOn:
    id: "notification_toggle"
    optional: true
- waitForAnimationToEnd

# Navigate back to settings main screen
- tapOn:
    point: "30,100"
    optional: true
- waitForAnimationToEnd

# Navigate back to main screen
- tapOn:
    point: "30,100"
- waitForAnimationToEnd
- extendedWaitUntil:
    visible: "My Contacts"
    timeout: 10000

# Navigate back to settings to verify persistence
- tapOn:
    point: "16,100"
- waitForAnimationToEnd

# Go back to notifications
- swipe:
    start: "50%,70%"
    end: "50%,40%"
- waitForAnimationToEnd
- tapOn:
    text: "Notifications"
    optional: true
- waitForAnimationToEnd

# Verify the toggle state persisted
- assertVisible:
    text: "Enable Notifications"
    optional: true

# Return to map
- tapOn:
    point: "30,100"
    optional: true
- waitForAnimationToEnd
- tapOn:
    point: "30,100"
- waitForAnimationToEnd
- extendedWaitUntil:
    visible: "My Contacts"
    timeout: 10000