appId: app.mygrid.grid
---

# Start with fresh login
- runFlow: flows/login_testuser1.yaml

# Test: Send a friend request to testuser3
# Prerequisite: testuser1 logged in on map screen

- launchApp
- waitForAnimationToEnd
- extendedWaitUntil:
    visible: "My Contacts"
    timeout: 10000

# Tap the person-add icon
- tapOn:
    point: "60%,62%"
- waitForAnimationToEnd

# Should see Add Contact modal
- assertVisible: "Add Contact"

# Tap on the username text field and enter full Matrix ID format
- tapOn: "john:homeserver.io"
- inputText: "testuser3:localhost"
- waitForAnimationToEnd

# Dismiss keyboard
- hideKeyboard
- waitForAnimationToEnd

# Tap Send Request
- tapOn: "Send Request"
- waitForAnimationToEnd

# Verify we returned to map screen
- extendedWaitUntil:
    visible: "My Contacts"
    timeout: 10000

# Verify Search Contacts visible (confirms we're on the main map, not modal)
- assertVisible: "Search Contacts"
